<HTML>
<meta charset="utf-8"/>
<head><script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/560EA8F9-74BA-1840-833D-937F39692B76/main.js" charset="UTF-8"></script></head>

<body>

<canvas id="canvas" width="500" height="500" style="border: 1px solid black"></canvas>

<script>

var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");

canvas.addEventListener("mousedown", handleMouseDown);
canvas.addEventListener("mousemove", handleMouseMove);
canvas.addEventListener("mouseup", handleMouseUp);

  
var p0 = {x: 0, y:0};
var p1 = {x: 0, y:0};

 
var isdown = 0;

 
display();


function setPixel(x, y) {
	context.fillRect(x, y, 1, 1);
}
  

function handleMouseUp(event)
{
	isdown = 0;
	p1.x = event.clientX - canvas.offsetLeft;
	p1.y = event.clientY - canvas.offsetTop;
	display();
}

  

function handleMouseDown(event)
{
	isdown = 1;
	p0.x = event.clientX - canvas.offsetLeft;
	p0.y = event.clientY - canvas.offsetTop;
	display();

}

  

function handleMouseMove(event)

{
	if (isdown == 0)
		return;
	
  	p1.x = event.clientX - canvas.offsetLeft;
	p1.y = event.clientY - canvas.offsetTop;

	display();
}



function bresenham(p0, p1)
{
	var x1 = p0.x;
	var y1 = p0.y;
	var x2 = p1.x;
	var y2 = p1.y;
	
	var x = x1;
	var y = y1;
	var deltaX = Math.abs(x2) - Math.abs(x1);
	var deltaY = Math.abs(y2) - Math.abs(y1);
	var slope = 0;
	var octant;
	var larger = deltaX > deltaY;
	var x_postiive = deltaX > 0;
	var y_positive = deltaY > 0;
	
	if(larger && x_postiive && y_positive){
		document.getElementById("comments").innerHTML = "octant 1";
		octant = 1;
		slope = deltaY/deltaX;
	}
	else if(!larger && x_postiive && y_positive){
		document.getElementById("comments").innerHTML = "octant 2";
		octant = 2;
		slope = deltaX/deltaY;
	}
	else if(!larger && !x_postiive && y_positive){
		document.getElementById("comments").innerHTML = "octant 3";
		octant = 3;
		slope = deltaX/deltaY;
	}
	else if(larger && !x_postiive && y_positive){
		document.getElementById("comments").innerHTML = "octant 4";
		octant = 4;
		slope = deltaY/deltaX;
	}
	else if(larger && !x_postiive && !y_positive){
		document.getElementById("comments").innerHTML = "octant 5";
		octant = 5;
		slope = deltaY/deltaX;
	}
	else if(!larger && !x_postiive && !y_positive){
		document.getElementById("comments").innerHTML = "octant 6";
		octant = 6;
		slope = deltaX/deltaY;
	}
	else if(!larger && x_postiive && !y_positive){
		document.getElementById("comments").innerHTML = "octant 7";
		octant = 7;
		slope = deltaX/deltaY;
	}
	else if(larger && x_postiive && !y_positive){
		document.getElementById("comments").innerHTML = "octant 8";
		octant = 8;
		slope = deltaY/deltaX;
	}
	
	
	document.getElementById('quadrant').innerHTML = "slope: " + slope;
	document.getElementById("deltaX").innerHTML = "deltaX: " + deltaX;
	document.getElementById("deltaY").innerHTML = "deltaY: " + deltaY;
	document.getElementById("point1").innerHTML = "x1: " + x1 + ", y1: " + y1;
	document.getElementById("point2").innerHTML = "x2: " + x2 + ", y2: " + y2;
	document.getElementById("info").innerHTML = larger + " " + x_postiive + " " + y_positive;

	if(octant == 1 || octant == 4 || octant == 5 || octant == 8){
		for(var x = x1; x<= x2; x++){
			setPixel(x, y);
			y+=slope;
		}
	}
	else {
		for(var y = y1; y<= y2; y++){
			setPixel(x, y);
			x+=slope;
		}
	}


}

  

function display()
{
	context.clearRect(0, 0, canvas.width, canvas.height);
	var dx = p1.x - p0.x;
	var dy = p1.y - p0.y;

	context.fillStyle = "#FF0000";
	context.strokeStyle = "#FF0000";
	
	bresenham(p0, p1); <!-- this should work before you turn in your assignment -->


	context.fillStyle = "#0000FF";
	context.strokeStyle = "#0000FF";
	/*
	// this is what your algorithm SHOULD output, comment these when working on the algorithm
	context.beginPath();
	context.moveTo(p0.x, p0.y);
	context.lineTo(p1.x, p1.y);
	context.stroke();*/
}

  

</script>

<p id='quadrant'></p>
<p id='deltaX'></p>
<p id='deltaY'></p>
<p id='comments'></p>
<p id='point1'></p>
<p id='point2'></p>
<p id='info'></p>


</body>

</html>
